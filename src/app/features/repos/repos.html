<!-- ðŸ”¹ Titolo in alto -->
<app-title title="Repositories"></app-title>

<!-- ðŸ”¹ Barra: Clear + SearchBar -->
<div class="search-toolbar">
  <p-button
    label="Clear"
    [outlined]="true"
    icon="pi pi-filter-slash"
    (click)="clearFilterHandler()"
    class="p-button-sm"
  ></p-button>

  <app-search-bar
    [query]="querySignal()"
    (queryChange)="onQueryChange($event)"
    (enter)="onSearchSubmit()"
  ></app-search-bar>
</div>


<!-- ðŸ”¹ Layout a due colonne -->
<div class="content-layout">
  <!-- ðŸ”¸ Filtro a sinistra -->
  <div class="sidebar">
    <app-menu-filter-by
      class="sidebar"
      (filterChange)="onFilterChange($event)">
    </app-menu-filter-by>
  </div>

  <!-- Loading -->
  <p *ngIf="isLoading()">Loading...</p>

  <!-- Error -->
  <p class="error" *ngIf="errorMessage() && !isLoading()">{{ errorMessage() }}</p>
  
  <!-- No results -->
  <p *ngIf="noResults() && !isLoading() && !errorMessage()">No results found.</p>

  <!-- ðŸ”¸ Results on right -->
  <div class="results-table"  *ngIf="!isLoading() && !errorMessage() && !noResults()">
    <p-table [value]="items()">
      <ng-template pTemplate="header">
        <tr>
          <th>Name</th>
          <th>Avatar</th>
          <th>Created At</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
        <tr (click)="onRowClick(item)" style="cursor: pointer;">
          <td>{{ item.name }}</td>
          <td>
            <img
              [src]="item.avatar"
              alt="Owner avatar"
              width="40"
              height="40"
              style="border-radius: 50%; object-fit: cover;"
            />
          </td>
          <td>{{ item.createdAt | date: 'short' }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
